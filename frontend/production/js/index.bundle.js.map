{"version":3,"sources":["webpack://trick-track/./source/js/add.js","webpack://trick-track/./source/js/bpm.js","webpack://trick-track/./source/js/cell.js","webpack://trick-track/./source/js/controls.js","webpack://trick-track/./source/js/matrix.js","webpack://trick-track/./source/js/player.js","webpack://trick-track/./source/js/slider.js","webpack://trick-track/./source/js/util.js","webpack://trick-track/webpack/bootstrap","webpack://trick-track/webpack/runtime/compat get default export","webpack://trick-track/webpack/runtime/define property getters","webpack://trick-track/webpack/runtime/hasOwnProperty shorthand","webpack://trick-track/webpack/runtime/make namespace object","webpack://trick-track/./source/js/index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAA+C;;AAE/C;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,0DAAkB;AACzC;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;AC5BA;;;AAGA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA,e;AACA;;;;AAIsC;;;;;;;;;;;;;;;;;;;;ACnBtC;AACA;;AAEA,mBAAmB,WAAW;;AAE9B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,mBAAmB,kBAAkB;AACrC,yCAAyC;AACzC;AACA;AACA,iBAAiB;AACjB;AACA,GAAG;AACH;AACA;;AAEA;AACA,SAAS,QAAQ;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC9DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,a;AACA,SAAS;AACT,KAAK;AACL;;;;;AAKA;AACA;AACA;AACA,IAAI;;AAEJ;AACA,0BAA0B;AAC1B;;;AAGA;AACA,kC;AACA,IAAI;AACJ,C;;;;;;;;;;;;;;;;;;;;AChC6C;;AAE7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;;AAGA;AACA,QAAQ,YAAY;AACpB;AACA;AACA;;AAEA;AACA,6B;AACA;;;AAGA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA,yD;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;;AAEA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,4DAAkB;AAC7D;;AAEA,KAAK;AACL,GAAG;AACH;;;AAGA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;;;;;;AAMA,E;;;;;;;;;;;;;;;;ACpIA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;;;AAGA;;AAEA,4B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEwC;;;;;;;;;;;;;;;;;;ACnDxC;;AAEA;AACA,oCAAoC,CAAK;AACzC;;AAEA;AACA;AACA;;AAEA,E;;;;;;;;;;;;;;;;UCVA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA,cAAc,0BAA0B,EAAE;WAC1C,cAAc,eAAe;WAC7B,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,6CAA6C,wDAAwD,E;;;;;WCArG;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;;;;;;;;;;;;;;;;ACNqC;AACwD;AACY;AAC7C;AACN;AACiB;AAC3B;AACX;AACN;;AAE3B,UAAU,SAAS;;AAEnB;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,sB;;AAEA,iBAAiB,sDAAY;AAC7B,iBAAiB,qDAAW,mBAAmB;AAC/C,0DAAc,WAAW;;AAEzB,qBAAqB,+DAAmB;;AAExC,gEAAoB,yBAAyB,yDAAmB;;AAEhE,8DAAiB,GAAG;;;;;;;;AAQpB;AACA;AACA,IAAI;;;;AAIJ;;AAEA;;AAEA;;AAEA,8B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;;;;;AAKA;;AAEA,8C;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;;;AAGA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA,+B;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA,iCAAiC,yDAAiB;;AAElD,uBAAuB,oDAAY;AACnC;AACA;AACA;;;;AAIA;AACA;;AAEA;;AAEA,WAAW,MAAM;AACjB;AACA;;AAEA;AACA,yB;AACA;AACA;AACA;AACA;;AAEA,IAAI;AACJ,GAAG;;AAEH;;;AAGA;AACA;AACA;;AAEA;AACA;;;;AAIA;;AAEA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;;;;AAMA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;;;AAGA,yBAAyB,gBAAgB;AACzC;AACA;AACA;AACA;AACA;AACA,Q;AACA;;AAEA;AACA;;AAEA;;;;AAIA;;AAEA,QAAQ,oDAAU;AAClB;AACA;AACA;AACA;AACA,CAAC","file":"index.bundle.js","sourcesContent":["import {generateMatrixLane} from './matrix.js';\n\nconst inputAdd = document.getElementById('.#sample');\n\nconst FILE_TYPES = ['mp3', 'wav'];\n\nconst uploadFile = (evt, cb) => {\n\n    const sound = evt.files;\n    const fileName = sound.url.toLowerCase();\n  \n    const matches = FILE_TYPES.some((it) => {\n      return fileName.endsWith(it);\n    });\n  \n    if (matches) {\n      const reader = new FileReader();\n      reader.addEventListener('load', cb)\n      reader.readAsDataURL(sound);\n    }\n  };\n  \nconst uploadSound = () => {\n  uploadFile(inputAdd, generateMatrixLane)\n}\n\nconst addInpytAddHandler = () => {\n  inputAdd.addEventListener('click', uploadSound)\n};\n\nexport {addInpytAddHandler}","const bpmControl = document.querySelector('#bpm');\n\n\nconst addBpmInputHandler = (callback) => {\n  let tempo\n    bpmControl.addEventListener('change', function() {\n    tempo = this.value;\n    callback(tempo)\n  });\n  \n};\n\nconst setTempo = (tempo) => {\n    //const tempo = bpmControl.value;\n    const tic = (60 / tempo) / 4;\n    return tic;  \n  }\n\n\n\nexport {addBpmInputHandler, setTempo};\n","\nconst initialCells = (steps) => {\n    let cells = [];\n   \n    for (let i = 0; i < steps; i++) {\n\n      const cell = {\n        played: false,\n        checked: false,\n        disabled: false\n      };\n\n      cells.push(cell);\n    }\n    \n    return cells;\n}\n\nconst createLanes = (sounds, cells) => {\n  const lines = []\n \n  sounds.map((sound) => {\n    const steps = [];\n\n    for (let i = 0; i < cells.length; i++) {\n      const clonedCell = Object.assign({}, cells[i]);\n      steps.push(clonedCell)\n    }\n    const obj = {line: sound, cells: steps}\n    lines.push(obj)\n  })\n  return lines\n}\n\nconst setCellCheckedColor = (cell) => {\n  const {checked} = cell;\n  switch(checked) {\n    case true:\n      return '#000000';\n    break;\n    case false:\n      return '#ffffff';\n    break;\n    default:\n      return '#ffffff';\n  }\n}\n\nconst setCellPlayedColor = (cell) => {\n  const {played} = cell;\n  switch(played) {\n    case true:\n      return \"#ff00ff\";\n    break;\n    case (!true): \n      return \"\"\n    case false:\n      return \"#ffffff\";\n    break;\n    default:\n      return \"#ffffff\";\n  }\n}\n\n\n\nexport {initialCells, createLanes, setCellCheckedColor, setCellPlayedColor}","const volumeControls = document.querySelectorAll('[data-action=\"volume\"]');\nconst pannerControls = document.querySelectorAll('[data-action=\"panner\"]');\n\nconst am = (buffer, audioData) => {\n    volumeControls.forEach((volumeControl) => {\n        console.log(volumeControl)\n        volumeControl.addEventListener('input', () => {\n            const j = volumeControls.indexOf(volumeControl, 0)\n            const i = [...buffer.urls].indexOf(audioData, 0)\n            if (j === i) {\n                return volumeControl.value;\n            } \n        })\n    });\n}\n\n\n\n\n// volumeControl.addEventListener('input', function() {\n//     \n// \tgainNode.gain.value = this.value;\n// }, false);\n\n// // panning\n// const pannerOptions = {pan: 0};\n// const panner = new StereoPannerNode(context, pannerOptions);\n\n\n// pannerControl.addEventListener('input', function() {\n// \tpanner.pan.value = this.value;\t\n// }, false);\n export {am}; ","import {setCellPlayedColor} from './cell.js';\n\nconst sequencer = document.querySelector('.sequencer__wrapper');\nconst sampleList = sequencer.querySelector('.sequencer__samples-list');\nconst sampleTemplate = document.querySelector('#matrix').content.querySelector('.sequencer__samples-item');\n\n// const createLine = (sound) => {\n//   const newSample = sampleTemplate.cloneNode(true);\n//   newSample.querySelector('.button').textContent = sound;\n//   sampleList.append(newSample);\n// }\n\nconst renderStep = () => {\n  const cellElement = document.createElement('button');\n  cellElement.classList.add('sequencer__cell');\n  cellElement.type = 'button';\n  cellElement.tabIndex = 0;\n\n  return cellElement;\n}\n\nconst fillStep = (stepsList, steps) => {\n   \n   const fragment = document.createDocumentFragment();\n   const fragmentOne = document.createDocumentFragment();\n\n   steps.slice(0, 16).forEach((step) => {\n    \n    const newStep = renderStep();\n  \n    fragment.append(newStep);\n    });\n\n    steps.slice(16, 32).forEach((step) => {\n      const newStep = renderStep();\n      fragmentOne.append(newStep);\n      });\n  \n    stepsList[0].append(fragment);\n    stepsList[1].append(fragmentOne);\n};\n  \n  \nconst generateMatrixLane = (lane) => {\n  const{line, cells} = lane\n  const newSample = sampleTemplate.cloneNode(true);\n  newSample.querySelector('.button').textContent = line.replace(/^.*[\\\\\\/]/, '').slice(0, -4);\n  sampleList.append(newSample);\n\n  const stepsList = newSample.querySelectorAll('.sequencer__step-list');\n  fillStep(stepsList, cells); \n};\n\n\nconst generateMatrix = (lanes) => {\n    lanes.forEach((lane) => {\n    generateMatrixLane(lane);\n  })\n};\n\nconst createCellsArray = (i) => {\n  const slidesFirst = document.querySelectorAll('.slide-1');\n  const slidesSecond = document.querySelectorAll('.slide-2');\n  \n  const cellsOfLane = [];\n    cellsOfLane.push.apply(cellsOfLane, slidesFirst[i].children);\n    cellsOfLane.push.apply(cellsOfLane, slidesSecond[i].children);\n    return cellsOfLane;\n}\n\nconst createAllCellsArray = () => {\n  const allCellsLists = []\n  for (let i = 0; i < 3; i++) {\n    const cellsOfLane = createCellsArray(i);\n    allCellsLists.push(cellsOfLane);\n  }\n  return allCellsLists\n}\n\nconst addButtonCellHandler = (cellsElements, lanes, cb) => {\n  //const cellsButtonsArray = createAllCellsArray();\n  cellsElements.forEach((cellsOfLane) => {\n\n    cellsOfLane.forEach((cell) => cell.addEventListener('click', (evt) => {\n      const i = cellsElements.indexOf(cellsOfLane, 0);\n      const {cells} = lanes[i];\n      const cell = evt.target;\n      const j = cellsOfLane.indexOf(cell, 0);\n      cells[j].checked = cells[j].checked ? false : true; \n      cell.style.background = cb(cells[j]);\n    }))\n  })\n};\n\nconst renderPlayedCells = (cellsElements, lanes) => {\n\n  lanes.forEach((lane) => {\n    const {cells} = lane;\n    cells.forEach((cell) => {\n      const i = lanes.indexOf(lane);\n      const cellsOfLane = cellsElements[i];\n      const j = cells.indexOf(cell, 0);\n\n      if (cell.played != false) {\n        cellsOfLane[j].style.borderColor = setCellPlayedColor(cell);\n      }\n      \n    })\n  })\n}\n\n\n//создание новой дорожки\n\n  \n\n// const deleteLane = (lanes) => {\n  \n//   const before = lanes.slice(0, i);\n//   const after = lanes.slice(i, i + 1);\n//     const newArray = [...before, ...after];\n\n//     return {\n//       lanes: newArray,\n//     }\n//   })\n// };\n\n\n\n\n  \n  export {generateMatrix, createAllCellsArray, generateMatrixLane, addButtonCellHandler, renderPlayedCells}","const player = document.querySelectorAll('.player')\nconst playButton = document.getElementById('play');\nconst stopButton = document.getElementById('stop');\n\nconst playProject = (cb) => {\n    //isPlaying = true;\n    cb();\n}\n\nconst stopPlayProject = (cb) => {\n    //isPlaying = false;\n    cb();\n}\n\nconst addButtonPlayHandler = (callback, cb) => {\n    playButton.addEventListener('click', (callback));\n    stopButton.removeEventListener('click', (cb))\n}\n\nconst addButtonStopHandler = (cb, callback) => {\n    stopButton.addEventListener('click', (cb));\n    playButton.removeEventListener('click', callback)\n\n}\n\nexport {addButtonPlayHandler, addButtonStopHandler}","const nextArrow = document.querySelector('.slider__arrow--next');\nconst previousArrow = document.querySelector('.slider__arrow--prev');\nlet slideNumber = 1;\n\n \n//  class slider {\n      \n//   constructor(selector) {  \n//     this.loop = false;\n//     this.autoplay = false;\n//     this.slide = selector;\n//     this.interval = 5000;\n\nconst showSlide = (n) => {\n  const slidesLists = document.querySelectorAll('.slider-tracker');\n\n  slidesLists.forEach((slidesList) => {\n      const slides = slidesList.children\n\n      let i;\n      if (n > slides.length) {\n        slideNumber = 1;\n      }\n      if (n < 1) {\n        slideNumber = slides.length;\n      }\n      for (i = 0; i < slides.length; i++) {\n        slides[i].classList.remove(\"current-slide\");\n      }\n\n      slides[slideNumber-1].classList.add(\"current-slide\");\n    });\n    }\n\nconst onNextArrowClick = () => {\n  showSlide(slideNumber += 1);\n}\n\nconst onPreviousArrowClick = () => {\n  showSlide(slideNumber -= 1);\n}\nfunction currentSlide (n) {\n  showSlide(slideNumber = n);\n}\n\n\nconst addArrowsHandlers = () => {\n  nextArrow.addEventListener('click', onNextArrowClick);\n  previousArrow.addEventListener('click', onPreviousArrowClick);\n}\n\nexport {addArrowsHandlers, currentSlide}\n\n","const PRIMARY_MOUSE_BUTTON = 0;\n\nconst isEscEvent = (evt) => {\n    return evt.key === ('Escape' || 'Esc');\n  };\n  \n  const isMouseLeftEvent = (evt) => {\n    return evt.button === PRIMARY_MOUSE_BUTTON;\n  }\n  \n  export {isEscEvent, isMouseLeftEvent}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {isEscEvent} from './util.js';\nimport {initialCells, setCellCheckedColor, createLanes, setCellPlayedColor} from './cell.js';\nimport {addButtonCellHandler, generateMatrix, createAllCellsArray, renderPlayedCells} from './matrix.js';\nimport {addArrowsHandlers, currentSlide} from './slider.js';\nimport {addBpmInputHandler, setTempo} from './bpm.js';\nimport {addButtonPlayHandler, addButtonStopHandler} from './player.js';\nimport {addInpytAddHandler} from './add.js';\nimport {am} from './controls.js';\nimport '../sass/style.scss'\n\n//import {debounce} from 'lodash';\n\nconst DEBOUNCE_TIME = 1000;\n\n\nlet sounds = ['./samples/bdsh.wav', \n                './samples/boom.wav', \n                './samples/tsk.wav',\n              ];\n\nconst STEPS = 32;\nconst activeStep = 30; \n\nconst newCells = initialCells(STEPS);\nconst newLanes = createLanes(sounds, newCells); //дорожки\ngenerateMatrix(newLanes); // отрисовка дорожек\n\nconst cellsButtons = createAllCellsArray();\n\naddButtonCellHandler(cellsButtons, newLanes, setCellCheckedColor)\n\naddArrowsHandlers(); //стрелки слайдера\n\n\n\n\n\n\n\n// addFilterHandlers(\n//   debounce(renderOffersPin, DEBOUNCE_TIME));\n// })\n\n\n\n////Bufer////////////////////////////////////////////////////////\n\nlet context = new (window.AudioContext || window.webkitAudioContext)();\n\nclass Buffer {\n  \n  constructor(context, urls) {  \n    this.context = context;\n    this.urls = urls;\n    this.buffer = [];\n  }\n  \n  loadSound(url, index) {\n    let request = new XMLHttpRequest();\n    request.open('get', url, true);\n    request.responseType = 'arraybuffer';\n    let thisBuffer = this;\n    request.onload = function() {\n    \n      thisBuffer.context.decodeAudioData(request.response, function(data) {\n          thisBuffer.buffer[index] = data;\n      });\n          \n     };\n    request.send();\n  };\n  \n  createBuffer() {\n    this.urls.forEach((url, index) => {\n      this.loadSound(url, index);\n  \n    })\n  }\n\n getSound(index) {\n    return this.buffer[index];\n  }\n\n}\n\n\n\n\nconst playSound = (audioData, playTime) => {\n\n  const source = context.createBufferSource(); \n  source.buffer = audioData;\n  const gain = context.createGain();\n\n  source.connect(gain).connect(context.destination);\n \n    source.start(playTime);\n}\n\n\nconst buffer = new Buffer(context, sounds);\n\nbuffer.createBuffer();\n\n//////////////////////////////////////////////////\n\n\nlet button = document.getElementsByClassName('button');\nvar allSounds = [];\n  allSounds.push.apply(allSounds, button);\n\n\n\nconst onButtonPlaySound = () => {\n\n  allSounds.forEach((btn) => btn.addEventListener('click', (evt) => {\n      btn = evt.target;\n      const i = allSounds.indexOf(btn, 0);\n\n    playSound(buffer.getSound(i), 0) \n\n}))\n}\n\nonButtonPlaySound();\n\n\n\n//Sequencer\n\nlet startTime = 0;\nlet nextStepTime = 0.0;\nlet currentStep = 0;\nlet secondsPerBeat = 60 / bpm ;    \nlet isPlaying = false;\n\n\nfunction scheduleSound() {\n  let now = context.currentTime;\n  now -= startTime\n \n\n  while (nextStepTime < now + 0.2 ) {\n    \n    let pt = nextStepTime + startTime;\n    playStepAtTime(newLanes, pt, renderPlayedCells);\n    \n    nextStep(newLanes, currentSlide);\n  }\n    const ti = setTimeout(scheduleSound, 0);\n}\n\n\n\nfunction nextStep(lanes, callback) {\n  currentStep++;\n\n  lanes.forEach((lane) => {\n\n    const {cells} = lane;\n    cells.forEach((cell) => {\n      const currentCell = lane.cells[currentStep - 1];\n   \n    if (cell = currentCell) {\n      cell.played = true; \n    }\n    else {\n      cell.played = false\n    };\n\n   });\n  });\n\n  currentStep > 16 ? callback(2)  : callback(1);\n  \n  \n  if (currentStep === activeStep) {\n    currentStep = 0;\n  }\n  \n  nextStepTime += secondsPerBeat / 4;\n}\n\n\n\nfunction playStepAtTime(lanes, playTime, callback) {\n \n    for(let i = 0; i < lanes.length; i++) {\n        const lane = lanes[i];\n        if (lane.cells[currentStep].checked != false) {\n          playSound(buffer.getSound(i), playTime);\n        }\n    }\n    callback(cellsButtons, newLanes);\n} \n\n\n\nfunction play() {\n  isPlaying = true;\n  currentStep = currentStep;\n  nextStepTime = 0;\n  startTime = context.currentTime + 0.005;\n  scheduleSound();\n\n}\n\n\n\n\n// function stop() {\n//   isPlaying = false;\n//   scheduleSound()  \n//   console.log('stop')\n//   console.log(isPlaying)\n// }\n\n\n\n// addButtonPlayHandler(play, stop);\n// addButtonStopHandler(stop, play)\n\n\n\n  \n\n// const loop = () => {\n//   let spb = (60/120);\n//   let frames = 0;\n\n//    let currentC = 0;\n//    let lastStep = -1;\n\n//   if(!isPlaying) {\n//     frames++;\n\n//     let seconds = 60/frames;\n//     let beatTime = spb/seconds%activeStep;\n\n\n//     lastStep = currentC;\n//     currentC = Math.floor(beatTime*4);\n\n\n//     if(lastStep != currentC) {\n     \n      \n//      //for (let i = 0; i < activeStep; i++) {\n//       if(lastStep === i) {\n//         now = 0;\n//         playSound(buffer.getSound(1))\n//         playSound(buffer.getSound(2))\n//       }\n//     } \n//   }\n\n// }\n//   requestAnimationFrame(loop)\n\n// }\n\n\n\ndocument.addEventListener('keydown', (evt) => {\n  \n    if (isEscEvent(evt)) {\n      evt.preventDefault();\n      isPlaying = !isPlaying\n      play()\n    }\n});\n\n\n\n"],"sourceRoot":""}